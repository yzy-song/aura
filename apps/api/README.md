数据库设计总结
数据库由三个核心模型（数据表）构成：Profile (身份档案)、Tag (标签) 和 MoodEntry (情绪记录)。

这个设计的核心目标是支撑一个匿名的、可扩展的情绪分享社区

二、 为什么这样设计？(设计理念)
匿名优先 (Anonymity-First): 为了实现您提出的“无账号登录”和社区分享，我们没有使用传统的 Users 表，而是设计了 Profile 模型。它为每个用户（无论是否注册）提供了一个持久但匿名的身份，极大地降低了用户的使用门槛。

数据统一与灵活 (Consistency & Flexibility): 您预见到了预设标签和自定义标签的需求。我们没有用两张表或复杂的字段来处理，而是通过一个巧妙的设计，将所有标签都统一在 Tag 模型中，让数据既规范又灵活。

关系驱动 (Relation-Driven): 我们采用了现代数据库设计中的“多对多”关系。这使得一条情绪记录可以关联多个标签（例如同时记录“开心”和“工作”），这比最初的单标签设计更贴近真实生活，也为未来的数据分析提供了无限可能。

三、 关键字段是为了实现哪些功能？
这是将您的想法变为现实的最关键部分：

在 Profile (身份档案) 表中:

id: String @default(cuid()): 这是实现匿名登录的基石。即使用户不提供任何信息，我们也可以通过这个唯一的ID来识别他的所有操作，为他保存数据。

anonymousName 和 avatarId: 这两个字段是为了社区的展示。在公开的“情绪广场”上，每个用户都能有一个固定的匿名身份（如“开朗的长颈鹿”），增加了趣味性和社区感。

在 Tag (标签) 表中:

profileId: String?: 这是整个数据库设计中最关键、最巧妙的字段。

功能: 它完美地实现了**区分“系统标签”和“用户自定义标签”**的功能。

原理: 当 profileId 为空 (null) 时，代表这是一个由您后台创建的、所有用户都能看到的系统预设标签。当 profileId 有值时，代表这是 profileId 对应的那个用户自己创建的私有自定义标签。

@@unique([name, profileId]): 这个约束确保了系统标签的名字不会重复，同时也保证了同一个用户不能创建两个同名的自定义标签，保证了数据的整洁。

在 MoodEntry (情绪记录) 表中:

tags: Tag[]: 这是一个多对多关系。

功能: 它允许一条情绪记录同时关联多个标签。

相比您最初的设计: 这是一个巨大的升级。最初我们想的是一条记录只对应一个标签ID，现在则可以表达更复杂的情绪（比如：我感到**“平静”，因为我正在“阅读”**）。这让数据洞察的可能性大大增加。

pnpm --filter @aura/database exec prisma migrate dev --name add-identity-table
pnpm --filter @aura/database run generate
